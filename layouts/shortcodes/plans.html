
<label for="card-element">
    Credit or debit card
</label>
<div id="card-element">
    <!-- A Stripe Element will be inserted here. -->
</div>

<!-- Used to display Element errors. -->
<div id="card-errors" role="alert"></div>
<ul>
    {{ $plans := getJSON "https://www.bionicbodyfitness.com/.netlify/functions/list-plans" }}
    {{/*{{ $plans := .Site.Data.plans }}*/}}
    {{ range $plans }}
            {{ $stripePublicKey := getenv "TEST_STRIPE_PUBLIC_KEY"}}
            <h3>{{.Name}}</h3>
                    Plan ID: {{ .Id }}
                    Plan Price: {{ .Price }}
                    Plan Interval: {{ .Interval }}
                    <form action="https://www.bionicbodyfitness.com/.netlify/functions/register-new-member" method="POST" class="payment-form" id="{{ .Id }}">
                        <!-- TODO Intercept form submission.
                             TODO Determine CustomerID, if it is a returning Customer
                        -->
                        <input type="hidden" name="planId" value="{{.Id}}">
                        <input type="submit">
                    </form>
        {{/*{{ . | test_stripe_payment_form }}*/}}
    {{ end }}
</ul>
